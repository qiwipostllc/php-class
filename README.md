# QPWidget PHP class
(C) 2012, Zoya Schegolihina \<zschegolihina (at) qiwipost (dot) ru\>.

## Поддержка
По всем вопросам, связанным с поддежкой данного продукта Вы можете обратиться к его Автору или на адрес: support@qiwipost.ru.

##Подключение
Чтобы использовать класс, его необходимо подключить. Для этого необходимо скопировать файлы qpwidget.js и qpwidget.php на Ваш веб-сервер, предварительно сохранив их в рабочей кодировке Вашего сайта.
В дальнейшем подключение класса сводится к использованию кода путем включения через оператор include();

###Пример.
    include( 'путь/к/файлу/qpwidget.php' );
    $qp = new QPWidget( '9991234567', '123456', '100 руб.', 0, '', 'Выбран терминал оплаты name', 1, 'utf-8' );

* **9991234567** - номер телефона для авторизации (10 цифр).
* **123456** - пароль для авторизации
* **100 руб.** - стоимость доставки
* **0** - реальный доступ (не тестовый)
* **''** - относительный путь к папке с файлом qpwidget.js
* **Выбран терминал оплаты name** - Текст сообщения, которое вставляется автоматически в поле с комментарием после выбора терминала QiwiPost. Например: "Выбран терминал оплаты name", где name - будет заменено автоматически на ID терминала. Внимание, если в шаблоне сообщения не будет указан параметр name, то автоматически будет использован заданный по умолчанию шаблон.
* **1** - 1 - необходимо подключить jquery, 0 - не нужно подгружать jquery, т.к. он уже загружен на странице. Внимание! jquery необходим в любом случае, т.к. на нем работает подгружаемый js-скрипт!
* **utf-8** - Кодировка, в которой будут загружены данные о терминалах через api QiwiPost

##Список терминалов в виде выпадающего списка
Метод getDrop возвращает html-код выпадающего списка.

###Пример.
    echo $qp->getDrop( 'my_select', 'machine', 'comment' );

* **my_select** - css-класс html-объекта (атрибут class)
* **machine** - название html-объекта (атрибут name)
* **comment** - ID html-поля на форме с комментарием (в это поле будет автоматически добавлен ИД терминала)

##Список терминалов в виде выпадающего списка с картой
Метод getDropWithMap возвращает html-код выпадающего списка + ссылку на окно с картой для выбора терминала. Ссылка может быть в виде кнопки (тип button), картинки (тип image) или текстовой ссылки (тип link, по умолчанию).

###Пример.
    echo $qp->getDropWithMap( 'my_select_map', 'machine_map', 'comment', 'button', 'Показать карту' );

* **my_select_map** - css-класс html-объекта (атрибут class)
* **machine_map** - название html-объекта (атрибут name)
* **comment** - ID html-поля на форме с комментарием (в это поле будет автоматически добавлен ИД терминала)
* **button** - тип ссылки на карту (button,image,link).
* **Показать карту** - текст ссылки на карту


##Список терминалов в виде раскрытого списка (таблица)
Метод getTable возвращает html-код раскрытого списка.

###Пример.
    echo $qp->getTable( 'my_list', 'machine_list', 'comment' );

* **my_list** - css-класс html-объекта (атрибут class)
* **machine_list** - название html-объекта (атрибут name)
* **comment** - ID html-поля на форме с комментарием (в это поле будет автоматически добавлен ИД терминала)


##Ссылка на карту для выбора терминала в виде кнопки, изображения или ссылки
Метод getMapButton возвращает html-код ссылки на окно с картой для выбора терминала. Ссылка может быть в виде кнопки (тип button), картинки (тип image) или текстовой ссылки (тип link, по умолчанию).

###Пример.
    echo $qp->getMapButton( 'comment', 'image', 'map.png' );

* **comment** - ID html-поля на форме с комментарием (в это поле будет автоматически добавлен ИД терминала)
* **image** - тип ссылки на карту
* **map.png** - адрес расположения картинки (button,image,link).


##Активировать/дезактивировать элементы формы для выбора терминала
JS-метод qpChangeStatus( action ) устанавливает (action=0) или удаляет (action=1) атрибут disabled у всех html-объектов, предназначенных для выбора терминала QiwiPost: выпадающий список, radiobutton, кнопка/изображение/ссылка.
См. пример использования в Примере №9.

###Пример.
    <script>qpChangeStatus( 0 ); // делает элементы формы QiwiPost неактивными</script>

##Удалить информацию о выбранном терминале из поля с комментарием
JS-метод qpDelQiwiPostInfo() удаляет оригинальный текст сообщения из поля с комментарием.
См. пример использования в Примере №9.

###Пример.
    <script>qpDelQiwiPostInfo();</script>